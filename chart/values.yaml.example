# Default values for nats-gatekeeper.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 2

container:
  image:
    repository: foxford/nats-gatekeeper
    tag: ""

  env:
    - name: RUST_LOG
      valueFrom:
        configMapKeyRef:
          key: RUST_LOG
          name: nats-gatekeeper-environment
    - name: NATS_KEY
      valueFrom:
        secretKeyRef:
          key: gatekeeper-account.nk
          name: nats-credentials

  volumes:
    - name: config
      configMap:
        name: nats-gatekeeper-config
    - name: svc
      secret:
        secretName: some-secret

  volumeMounts:
    - name: config
      mountPath: /app/App.toml
      subPath: App.toml
    - mountPath: /path/to/mount
      name: svc
      subPath: svc.private_key

  resources:
    limits:
      cpu: 0.5
      memory: 50Mi
    requests:
      cpu: 0.5
      memory: 50Mi

audiences:
  tenantless:
    authn:
      key: path/to/public_key.p8.der
    authz:
      type: none

config:
  expiration: 16 hours
  max_subscriptions: 5
  max_payload: 102400

env:
  RUST_LOG: warn,nats_gatekeeper=info,svc_utils=info,svc_utils::metrics=warn

service:
  type: ClusterIP
  ports:
    http: 8080
    metrics: 8081

ingress:
  host: foo.bar.example
  tls:
    secretName: tls-certificates
